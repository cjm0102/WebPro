<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TENNIS COURT RESERVATION</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Add any other stylesheets or scripts here -->
  <style>
    /* Reset some default styles */
    body, h1, h2, h3, p, ul {
      margin: 0;
      padding: 0;
    }

    /* Global styles */
    body {
      font-family: Arial, sans-serif;
      background-color: #e6f7ff; /* Light blue background color */
      color: #333; /* Dark text color */
      line-height: 1.6;
    }
    .navbar {
      overflow: hidden;
      text-align: center;
      padding: 15px;
      margin-left: 0.3cm;
      margin-right: 0.3cm;
      border-top-left-radius: 5px; /* Rounded top-left corner */
      border-top-right-radius: 5px; /* Rounded top-right corner */
      border-bottom-left-radius: 0; /* Square bottom-left corner */
      border-bottom-right-radius: 0; /* Square bottom-right corner */
    }

    a {
      text-decoration: none;
      color: #0077cc; /* Blue link color */
    }

    a:hover {
      text-decoration: underline;
    }

    /* Header styles */
    header {
      background-color: #5790b9; /* Dark blue background color */
      color: #fff; /* White text color */
      text-align: center;
      padding: 20px 0;
      position: relative;
      top: 0;
      z-index: 999;
      transition: background-color 0.3s;
    }

    header h1 {
      font-size: 28px; /* Increase font size for main title */
      margin-bottom: 10px;
      font-weight: bold; /* Add bold font for main title */
    }

    /* Navigation menu styles */
    nav {
    background-color: #333; /* Dark background color for the menu */
    padding: 10px 0;
    margin-left: 0.3cm;
    margin-right: 0.3cm;
    text-align: center;
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
    border-top-left-radius: 0; /* Rounded top-left corner */
    border-top-right-radius: 0; /* Rounded top-right corner */
    border-bottom-left-radius: 5px; /* Square bottom-left corner */
    border-bottom-right-radius: 5px; /* Rounded corners for the navbar */
}
  

    nav a {
    margin-right: 20px;
    color: #fff; /* White text color for menu items */
    text-decoration: none;
    font-weight: bold;
    padding: 10px 20px; /* Add padding to menu items */
    border-radius: 10px; /* Rounded corners for the menu items */
    transition: background-color 0.3s, color 0.3s;
    }

    nav a:hover {
      background-color: #3a8ec9; /* Dark blue background color on hover */
      color: #fff; /* White text color on hover */
    }

    .announcement-container {
      display: flex;
      overflow: hidden;
      width: 100%;
      position: relative;
    }

    .announcement {
      min-width: 100%; /* Each announcement takes full width */
      transition: transform 0.5s ease-in-out;
      display: flex;
      flex-direction: column; /* Align children top to bottom */
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px; /* Add padding for spacing */
      margin: 10px 0; /* Add margin for separation */
      border-radius: 10px; /* Rounded corners */
      background-color: #e6f7ff; /* Light blue background color for all boxes */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
    }

    .announcement h3 {
      font-size: 20px; /* Larger font size for headlines */
      color: #0077cc; /* Dark blue color for the headline */
      margin-bottom: 10px; /* Bottom margin for separation */
    }

    .announcement p {
      font-size: 16px; /* Adjust font size for readability */
      color: #333; /* Darker text color for contrast */
    }

    /* Section styles */
    section {
      background-color: #fff; /* White background color for sections */
      padding: 20px;
      margin: 20px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    }

    section h2 {
      font-size: 24px; /* Adjust font size for section titles */
      margin-bottom: 10px;
    }

    /* Court Details container */
    .court-details-container {
      display: grid;
      grid-template-columns: 1fr 1fr; /* Two columns with equal width */
      gap: 20px; /* Add some gap between columns for spacing */
    }

    /* Court Image styles */
    .court-image {
      flex: 1;
    }

    .image-wrapper {
      max-width: 100%;
      overflow: hidden;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    }

    .image-wrapper img {
      width: 100%;
      height: auto;
      display: block;
      transition: transform 0.2s;
    }

    .image-wrapper img:hover {
      transform: scale(1.1); /* Add a zoom effect on hover */
    }

    .court-introduction {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background-color: #b4d2e9;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    }

    .court-introduction h3 {
      font-size: 26px;
      color: #333; /* Dark text color */
      margin-bottom: 10px;
      text-align: center;
    }

    .court-introduction p {
      font-size: 20px;
      color: #555; /* Slightly darker text color for contrast */
      text-align: center;
      line-height: 1.6;
    }

    /* Rules & Regulations styles */
    ul {
      list-style-type: disc;
      margin-left: 20px;
      text-align: left;
    }

    li {
      font-size: 16px;
      margin-bottom: 10px;
    }

    .footer-bar {
        background-color: #001f3f;
        height: 3px;
        margin: 0;
    }

    /* Footer content styles */
    .footer-content {
        display: flex;
        justify-content: space-between;
        align-items: center; /* Align items vertically in the center */
    }

    .footer-contact {
        flex: 1;
    }

    .footer-title {
        font-size: 16px;
        font-weight: bold;
        color: #fff; /* Text color added for better visibility */
        margin-bottom: 5px; /* Adjusted margin for better spacing */
    }

    /* Contact details */
    .footer-contact p {
        font-size: 14px;
        margin: 2px 0; /* Adjusted margin for better spacing */
        color: #fff; /* Text color added for better visibility */
    }

    /* Copyright section */
    .footer-copyright {
        background-color: #001f3f;
        color: #fff;
        text-align: left;
        font-size: 12px; /* Adjusted font size for copyright text */
    }

    /* Footer picture container */
    .footer-picture-container {
        text-align: right;
        padding-top: 5px; /* Adjust as needed for spacing */
    }

    .footer-picture-container img {
        max-width: 100%;
        height: auto;
        border-radius: 5px; /* Add border-radius for rounded corners */
    }

    #booking-form {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }

    input,
    select,
    button {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
    }

    button {
      background-color: #0077cc; /* Dark blue button color */
      color: #fff; /* White button text color */
      cursor: pointer;
    }

    button:hover {
      background-color: #00588a; /* Slightly darker blue on hover */
    }

    #booking-status {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .rules-image-container {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
      width: 100%;
      box-sizing: border-box;
    }

    .rules-image {
      max-width: 45%; /* Adjust the percentage to control the size */
      height: auto;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    }

    .availability-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    .availability-table th, .availability-table td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }

    .availability-table th {
      background-color: #f2f2f2;
    }

    /* New styles for availability status */
    .available {
      background-color: #a5d6a7; /* Light green for available */
      color: #00796b; /* Dark green text */
    }

    .occupied {
      background-color: #ef9a9a; /* Light red for occupied */
      color: #c62828; /* Dark red text */
    }
    /* Adjusted styles for the availability container, form, and timetable */
    .availability-container {
      display: flex;
      justify-content: space-between;
      align-items: flex-start; /* Align items at the top */
    }

    .availability-form {
      width: 45%; /* Adjust the width as needed */
    }

    .availability-status {
      width: 45%; /* Adjust the width as needed */
    }
  </style>
</head>
<body>

  <header class="navbar">
    <h1>TENNIS COURT RESERVATION</h1>
  </header>

<nav>
  <a href="index.html">Home</a>
  <a href="#court-details">Court Details</a>
  <a href="#announcements">Announcements</a>
  <a href="#check-availability">Check Availability</a>
  <a href="#booking">Booking</a>
  <a href="#rules">Rules & Regulations</a>
</nav>

<section id="announcements">
  <h2>Announcements</h2>
  <div class="announcement-container">
    <div class="announcement">
      <h3>Tennis Tournament</h3>
      <p>We are hosting a Tennis Tournament on 31 December 2023. Register now to participate!</p>
    </div>
    <div class="announcement">
      <h3>Court Maintenance</h3>
      <p>Important maintenance work will be conducted on 21 January 2024. Some courts may be unavailable during this time.</p>
    </div>
    <div class="announcement">
      <h3>Friendly Match</h3>
      <p>On 21 January 2024, A Friendly Match among the campus inasis will be organize and conducted. Register now to participate!</p>
    </div>
    <div class="announcement">
      <h3>Public Holiday</h3>
      <p>Merry Christmas!!! Our tennis court will be closed on 25 December 2023 as public holiday.</p>
    </div>
  </div>
</section>

<section id="court-details">
  <h2>Court Details</h2>
  <div class="court-details-container">
    <div class="court-introduction">
      <!-- Set the details for the brief introduction -->
      <h3>Welcome to Our Tennis Facility</h3>
      <p>Experience the thrill of tennis on our state-of-the-art courts. Our facility features top-notch tennis courts designed for players of all skill levels, from beginners to seasoned pros. Each court is equipped with professional-grade surfaces, providing optimal ball bounce and foot traction. The spacious layout and well-maintained environment make our tennis courts ideal for both casual matches and competitive play.</p>
    </div>
    <div class="court-image">
      <div class="image-wrapper">
        <!-- Set the image source and alt text for the Tennis Court Image -->
        <img src="img/tennis.png" alt="Tennis Court Image" title="State-of-the-Art Tennis Courts">
      </div>
    </div>

  </div>
</section>

<!-- Add this section to your existing HTML file -->
<section id="check-availability">
  <h2>Check Court Availability</h2>
  <!-- Add the new container for the form and timetable with adjusted styles -->
  <div id="availability-container" class="availability-container">
    <!-- Check Availability Form with adjusted width -->
    <div id="availability-form" class="availability-form">
      <label for="check-sport">Select Sport:</label>
      <select id="check-sport" required>
        <option value="Badminton">Badminton</option>
        <option value="Squash">Squash</option>
        <option value="Tennis">Tennis</option>
        <!-- Add more sport options as needed -->
      </select>

      <label for="check-court-number">Select Court:</label>
      <select id="check-court-number" required>
        <!-- Generate court options -->
        <!-- You can adjust the number of courts based on your specific facility -->
        <option value="1">Court 1</option>
        <option value="2">Court 2</option>
        <option value="3">Court 3</option>
        <option value="4">Court 4</option>
        <option value="5">Court 5</option>
        <option value="6">Court 6</option>
        <option value="7">Court 7</option>
        <option value="8">Court 8</option>
        <!-- Add more options as needed -->
      </select>

      <label for="check-date">Select Date:</label>
      <input type="date" id="check-date" required>

      <button onclick="checkAvailability()">Check Availability</button>
    </div>

    <!-- Availability Timetable with adjusted width -->
    <div id="availability-status" class="availability-status">
      <!-- Timetable will be dynamically generated here -->
    </div>
  </div>
</section>

<section id="booking">
  <h2>Booking</h2>
  <p>Each booking is for 1 hour per person and is limited to 1 court per person. Court bookings are available from 8 am to 8 pm.</p>

  <div id="booking-form">
    <label for="booking-date">Select Date:</label>
    <input type="date" id="booking-date" required>
    <input type="hidden" id="user_id" name="user_id" value="userID">
    <script>
      document.addEventListener("DOMContentLoaded", function () {
         let currentIndex = 0;
         const announcements = document.querySelectorAll('.announcement');
         const totalAnnouncements = announcements.length;
     
         function changeAnnouncement() {
           const nextIndex = (currentIndex + 1) % totalAnnouncements;
           announcements[currentIndex].style.transform = `translateX(-${100 * nextIndex}%)`;
           announcements[nextIndex].style.transform = `translateX(-${100 * nextIndex}%)`;
           currentIndex = nextIndex;
         }
     
         setInterval(changeAnnouncement, 5000); // Change announcement every 5 seconds
     
         // Get the userID from the URL
         var userID = getParameterByName('userID');
         console.log("UserID:", userID);
         

         // Set the user_id value in the hidden input field
         document.getElementById("user_id").value = userID;

         console.log(user_id);
       });
     
       // Function to get a parameter from the URL by name
       function getParameterByName(name, url) {
         if (!url) url = window.location.href;
         name = name.replace(/[\[\]]/g, "\\$&");
         var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
           results = regex.exec(url);
         if (!results) return null;
         if (!results[2]) return '';
         return decodeURIComponent(results[2].replace(/\+/g, " "));
       }
      
     </script>
    <label for="booking-time">Select Time:</label>
    <select id="booking-time" required>
      <!-- Generate time slots from 8 am to 8 pm with 1-hour intervals -->
      <!-- You can adjust this based on your specific needs -->
      <option value="8:00">8 am - 9 am</option>
      <option value="9:00">9 am - 10 am</option>
      <option value="10:00">10 am - 11 am</option>
      <option value="11:00">11 am - 12 pm</option>
      <option value="12:00">12 noon - 1 pm</option>
      <option value="13:00">1 pm - 2 pm</option>
      <option value="14:00">2 pm - 3 pm</option>
      <option value="15:00">3 pm - 4 pm</option>
      <option value="16:00">4 pm - 5 pm</option>
      <option value="17:00">5 pm - 6 pm</option>
      <option value="18:00">6 pm - 7 pm</option>
      <option value="19:00">7 pm - 8 pm</option>
      <!-- Add more options as needed -->
    </select>

    <label for="sport-type">Select Sport:</label>
    <select id="sport-type" required>
      <option value="Tennis">Tennis</option>
      <option value="Badminton">Badminton</option>
      <option value="Squash">Squash</option>
      <!-- Add more sport options as needed -->
    </select>

    <label for="court-number">Select Court:</label>
    <select id="court-number" required>
      <!-- Generate court options -->
      <!-- You can adjust the number of courts based on your specific facility -->
      <option value="1">Court 1</option>
      <option value="2">Court 2</option>
      <option value="3">Court 3</option>
      <option value="4">Court 4</option>
      <option value="5">Court 5</option>
      <option value="6">Court 6</option>
      <option value="7">Court 7</option>
      <option value="8">Court 8</option>
      <!-- Add more options as needed -->
    </select>

    <button onclick="bookCourt()">Book Court</button>
  </div>

  <div id="booking-status"></div>
</section>

<section id="rules">
  <h2>Rules & Regulations</h2>
  <ul>
    <li>Proper tennis attire, including non-marking tennis shoes, is mandatory on the courts.</li>
    <li>Players must adhere to the rules of fair play and sportsmanship at all times.</li>
    <li>Respect the time limits for court reservations to ensure fair access for all players.</li>
    <li>Only tennis-related activities are allowed on the courts during reserved times.</li>
    <li>Players are responsible for their own equipment, and any damage caused must be reported immediately.</li>
    <li>Court bookings can be made up to seven days in advance.</li>
    <li>Smoking, food, and drinks (except for water in non-breakable containers) are not allowed on the courts.</li>
    <li>Players should wait for a changeover to enter the court and should not disrupt ongoing matches.</li>
  </ul>
  <div class="rules-image-container">
    <!-- First image -->
    <img class="rules-image" src="img/regulation-tennis-court-size.png" alt="Tennis Rules Image 1" title="Tennis Rules & Regulations">

    <!-- Second image -->
    <img class="rules-image" src="img/tenniswear.png" alt="Tennis Rules Image 2" title="Tennis Rules & Regulations">
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    let currentIndex = 0;
    const announcements = document.querySelectorAll('.announcement');
    const totalAnnouncements = announcements.length;

    function changeAnnouncement() {
      const nextIndex = (currentIndex + 1) % totalAnnouncements;
      announcements[currentIndex].style.transform = `translateX(-${100 * nextIndex}%)`;
      announcements[nextIndex].style.transform = `translateX(-${100 * nextIndex}%)`;
      currentIndex = nextIndex;
    }

    setInterval(changeAnnouncement, 5000); // Change announcement every 5 seconds
  });
  // Example JavaScript to dynamically create court and time options
  const courtsContainer = document.getElementById('courts');
  const timeSlotsContainer = document.getElementById('time-slots');
  const bookButton = document.getElementById('book-court');

  function createCourtOptions() {
    for (let i = 1; i <= 8; i++) {
      const courtOption = document.createElement('button');
      courtOption.textContent = `Court ${i}`;
      courtOption.onclick = () => selectCourt(i);
      courtsContainer.appendChild(courtOption);
    }
  }

  function createTimeSlots() {
    for (let hour = 8; hour <= 20; hour++) { // 8 AM to 8 PM
      const timeSlot = document.createElement('button');
      timeSlot.textContent = `${hour}:00`;
      timeSlot.onclick = () => selectTimeSlot(hour);
      timeSlotsContainer.appendChild(timeSlot);
    }
  }

  function selectCourt(courtNumber) {
    console.log(`Court ${courtNumber} selected`);
    // Update selection and booking button state
  }

  function selectTimeSlot(time) {
    console.log(`Time ${time}:00 selected`);
    // Update selection and booking button state
  }

  // Initialize the options
  createCourtOptions();
  createTimeSlots();

  function checkAvailability() {
    const sport = document.getElementById('check-sport').value;
    const courtNumber = document.getElementById('check-court-number').value;
    const date = document.getElementById('check-date').value;

    // Send an AJAX request to check availability
    const xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function () {
      if (xhr.readyState === XMLHttpRequest.DONE) {
        if (xhr.status === 200) {
          const response = JSON.parse(xhr.responseText);
          displayAvailability(response);
        } else {
          console.error("Error checking availability: " + xhr.status);
        }
      }
    };

    xhr.open('POST', 'php/check_court_availability.php', true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.send(`sport=${sport}&courtNumber=${courtNumber}&date=${date}`);
  }

  function displayAvailability(response) {
    const availabilityStatus = document.getElementById('availability-status');
    availabilityStatus.innerHTML = ""; // Clear previous status

    // Generate a timetable to display availability
    const timetable = document.createElement('table');
    timetable.classList.add('availability-table');

    // Create table header
    const headerRow = document.createElement('tr');
    const headerCellTime = document.createElement('th');
    headerCellTime.textContent = 'Time';
    headerRow.appendChild(headerCellTime);

    const headerCellStatus = document.createElement('th');
    headerCellStatus.textContent = 'Availability';
    headerRow.appendChild(headerCellStatus);

    timetable.appendChild(headerRow);

    // Create table rows
    for (const slot of response) {
      const row = document.createElement('tr');

      const timeCell = document.createElement('td');
      timeCell.textContent = slot.startTime + ' - ' + slot.endTime;
      row.appendChild(timeCell);

      const statusCell = document.createElement('td');
      statusCell.textContent = slot.available ? 'Available' : 'Occupied';
      statusCell.classList.add(slot.available ? 'available' : 'occupied');
      row.appendChild(statusCell);

      timetable.appendChild(row);
    }

    availabilityStatus.appendChild(timetable);
  }
  function bookCourt() {
    const date = document.getElementById('booking-date').value;
    const time = document.getElementById('booking-time').value;
    const sport = document.getElementById('sport-type').value;
    const court = document.getElementById('court-number').value;
    const userId = document.getElementById('user_id').value;

    // Send an AJAX request to check availability
    const availabilityXhr = new XMLHttpRequest();
    availabilityXhr.onreadystatechange = function () {
        if (availabilityXhr.readyState === XMLHttpRequest.DONE) {
            if (availabilityXhr.status === 200) {
                const response = JSON.parse(availabilityXhr.responseText);
                if (response.available) {
                    // If the slot is available, proceed with the booking
                    // Create a FormData object and append form data
                    const formData = new FormData();
                    formData.append("booking-date", date);
                    formData.append("booking-time", time);
                    formData.append("sport-type", sport);
                    formData.append("court-number", court);
                    formData.append("user_id", userId); // Include the user ID

                    // Send an AJAX request to process the booking
                    const bookingXhr = new XMLHttpRequest();
                    bookingXhr.open("POST", "php/process_booking.php", true);
                    bookingXhr.onload = function () {
                        if (bookingXhr.status === 200) {
                            // Handle the successful response
                            const bookingStatus = document.getElementById('booking-status');
                            bookingStatus.textContent = bookingXhr.responseText;
                        } else {
                            // Handle errors
                            alert("Error: " + bookingXhr.statusText);
                        }
                    };
                    bookingXhr.send(formData);
                } else {
                    // Display a message indicating the slot is not available
                    const bookingStatus = document.getElementById('booking-status');
                    bookingStatus.textContent = "Error: Slot already booked. Please choose another time or court.";
                }
            } else {
                console.error("Error checking availability: " + availabilityXhr.status);
            }
        }
    };

    availabilityXhr.open('POST', 'php/check_availability.php', true);
    availabilityXhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

    // Include userID in the data sent to the server
    availabilityXhr.send(`date=${date}&time=${time}&sport=${sport}&court=${court}&userID=${userId}`);
}
</script>
<footer style="background-color: #001f3f; margin: 0; padding: 0;">
  <div class="footer-bar"></div>
  <div class="footer-content" style="padding: 10px 1cm 10px 0;">
      <div class="footer-contact">
          <p class="footer-title" style="font-size: 16px; font-weight: bold; color: #fff; margin-left: 1cm;">SPORTS CENTRE</p>
          <p style="font-size: 14px; color: #fff; margin-left: 1cm;">UNIVERSITI UTARA MALAYSIA </p>
          <p style="font-size: 14px; color: #fff; margin-left: 1cm;">06010 Sintok</p>
          <p style="font-size: 14px; color: #fff; margin-left: 1cm;">Kedah Darul Aman, Malaysia</p>
          <p style="font-size: 14px; color: #fff; margin-left: 1cm;">&phone; +604-928 3560</p>
      </div>

      <div class="footer-picture-container">
          <img src="img/footer.png" alt="Footer Picture" title="Footer Picture" style="max-width: 100%; height: auto; border-radius: 5px;">
      </div>
  </div>

  <div class="footer-copyright" style="padding: 5px 1cm;">
      <p style="margin: 0; font-size: 12px;">&copy; 2022 Universiti Utara Malaysia</p>
  </div>
</footer>
</body>
</html>
